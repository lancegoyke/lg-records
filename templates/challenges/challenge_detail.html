{% extends '_base.html' %}
{% load crispy_forms_tags %}

{% block title %}
    {{ challenge.name|title}}
{% endblock title %}
    

{% block content %}


<h2 class="title">{{ challenge.name|title }}</h2>
<div class="content">
        
    {% for line in challenge.description.splitlines %}
        <p>{{ line }}</p>
    {% endfor %}
        
    <p>
    {% for tag in challenge.tags.all %}
        <span class="tag is-info is-light">
            {{ tag }}
        </span>
    {% endfor %}
    </p>

    
    {% if user.is_superuser %}
    
        <p>
            <a class="button is-info" href="{% url 'challenge_update' challenge.slug %}">Update</a>
        </p>
    
    {% endif %}
        

    <h3>Challenge records</h3>

    <div class="content">
        
        {% if challenge.records.all.count > 0 %}
            
            {% for record in challenge.records.all %}
            <p>{{ record.user }} - {{ record.time_score }}</p>
            {% endfor %}
        
        {% else %}

            <p>If you hurry, you might be the first to set a record for this one!</p>
        
        {% endif %}
        
    </div>

    <a class="button is-primary is-light" href="{% url 'challenge_list' %}">Return to All Challenges</a>
</div>


<div class="content testing">
    <form action="" method="POST">
        {% csrf_token %}
        {{ record_create_form|crispy }}
        <button class="button" type="submit">Add Score</button>
    </form>

</div>
{% endblock content %}